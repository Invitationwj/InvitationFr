<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>W&J</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Intro vidéo -->
  <div id="intro">
    <!-- <button onclick="document.getElementById('intro-video').muted = false;">
  🔊 Activer le son
</button>-->
     <button id="soundButton">
        🔊 Activer le son
    </button>
    <video id="intro-video" autoplay muted playsinline>
      <source src="finalfinal8.mp4" type="video/mp4" />
      Ton navigateur ne supporte pas la vidéo.
    </video>
    <audio id="intro-music" autoplay muted loop>
  <source src="son.mp3" type="audio/mp3" />
</audio>
  </div>

  <!-- Background vidéo -->
  <video autoplay muted loop playsinline id="video-background">
    <source src="fondwj3.mp4" type="video/mp4" />
    Ton navigateur ne supporte pas la vidéo.
  </video>

  <!-- Contenu du site -->
  <div id="site-content">
    <div class="conteneur-texte">

      <!-- Texte principal (tel que sur l'image) -->
      <section class="inv-text">
        <div class="headline">W &amp; J<br></div>

        <p class="lead">Chère famille, chers amis,</p>

        <p class="highlight">✨ Breaking news ✨ : on se marie ! Et non, ce n’est pas une rumeur 🥹</p>
        <p>
          Nous avons décidé de nous dire <strong>  OUI pour la vie<br></strong> 💍 Et pour rien au monde, nous
          n’imaginerions célébrer ce jour sans vous.<br>
        </p>

        <p>
          Nous serons très heureux de vous compter parmi nous pour partager cette soirée unique, remplie
          d’amour, de rires et de souvenirs inoubliables.<br><br><br> le <strong> 🗒 Samedi 6 décembre 2025 <br> à partir de 19h et jusqu’à 2h00.</strong><br>
          <strong>Au Pavillon Dauphine, Pl. du Maréchal de Lattre de Tassigny, 75116 Paris.</strong>
        </p>

        <div class="separator">|</div>

        <p class="programme-title"><span style="position: relative; left: -50px;">Au programme :</span></p>
        <ul class="points">
          <li>Des saveurs douces et raffinées pour éveiller vos papilles🍡</li>
          <li>Des mélodies pour vibrer ensemble jusqu’au bout de la nuit 🎶</li>
          <li>Des instants magiques qui deviendront de belles histoires à raconter ✨</li>
        </ul>

        <p>Merci de confirmer votre présence avant le <strong>30 septembre 2025</strong>.</p>
      </section>

      <!-- Formulaire intégré dans la colonne -->
      <section class="rsvp-section" aria-labelledby="rsvp-title">
        <h2 id="rsvp-title">Non/Prénom</h2>

        <form id="rsvp-form" action="https://formspree.io/f/xblawojd" method="POST" novalidate>
          <!-- nom -->
          <label class="label-text" for="fullname"></label>
          <input id="fullname" name="fullname" type="text" required placeholder="Ex : Marie Dupont">

          <!-- présence : cases côte à côte (utilisation de radio conseillé, mais on garde style visuel comme sur l'image) -->
          <div class="inline-choices" role="radiogroup" aria-label="Présence">
            <label class="choice">
              <input type="radio" name="attendance" value="oui" required> <span>Oui, je viens ! (et je compte bien mettre le feu au dancefloor 🔥)</span>
            </label>
            <label class="choice">
              <input type="radio" name="attendance" value="non"> <span>Non, je ne viens pas… (et je le regretterai toute ma vie 😭)</span>
            </label>
          </div>

          <!-- choix du repas -->
          <fieldset class="meal-fieldset" aria-label="Choix du repas">
            <p>Choix du repas<p>
            <label class="meal">
              <input type="radio" name="meal" value="viande" required> Viande
            </label>
            <label class="meal">
              <input type="radio" name="meal" value="vegetarien"> Végétarien
            </label>
          </fieldset>

          <!-- Dress code + petite note -->
          <div class="dresscode">
            <p>Dress code :</p>
            <p class="small">👗 Femmes : une tenue verte élégante (oui, on veut une salle pleine d’émeraudes ✨).<br>
            👔 Hommes : Enfilez un costume noir et une chemise blanche…et devenez les princes de notre soirée 🤍🖤 </p>
          </div>

          <div class="parents-note">
            <p>Petit mot aux parents :</p>
            <p>Glissez un tendre bonne nuit à vos enfants avant de partir… cette soirée est rien que pour vous 😊</p>
          </div>

          <!-- bouton envoyer -->
          <div class="submit-wrap">
            <button type="submit" class="btn-submit">CONFIRMER</button>
          </div>

          <!-- message de confirmation envoyé (sera affiché via JS si tu veux) -->
          <div id="form-msg" aria-live="polite" class="form-msg" hidden></div>
        </form> <br><br>
        <p><i>Votre invitation est nominative et rien que pour vous, pas de guest surprise 😅.</i></p> <br><br>
    <p>Avec toute notre affection 💍</p>
        <p class="names">CHERIF &amp; LAFOURCADE</p>
      </section>
      
       <!--<div class="partie1">  ICIC ya le debutan cienne aprtie  </div>
    
      <div class="rsvp">
        <h2>RSVP</h2>
        <form action="https://formspree.io/f/xdklnnpg" method="POST">
          <label for="nom">Nom et prénom:</label>
          <input type="text" id="nom" name="nom" required>

          <div class="checkboxes">
            <label><input type="checkbox" name="presence" value="oui"> Oui</label>
            <label><input type="checkbox" name="presence" value="non"> Non</label>
          </div>
       

          <input type="submit" value="Envoyer">
        </form> 
      </div>-->

  <footer>
   
  </footer>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const intro = document.getElementById('intro');
  const video = document.getElementById('intro-video');
  const introMusic = document.getElementById('intro-music');
  const unmuteBtn = document.getElementById('unmute-btn');

  // Assure que la vidéo est bien muted au départ
  if (video) video.muted = true;

  // Fonction d'activation du son (appelée seulement après interaction utilisateur)
  async function activateSoundAndResume() {
    try {
      // Dé-mute la vidéo AVANT de relancer la lecture
      video.muted = false;
      video.volume = 1.0;

      // Relancer la vidéo (sur Android, relancer play() après unmute évite le blocage)
      await video.play();
    } catch (err) {
      console.warn('video.play() rejeté ou erreur:', err);
      // On essaie quand même une relance silencieuse
      try { await video.play(); } catch(e){ console.warn('replay échoué', e); }
    }

    // Lancer la musique (sur interaction utilisateur donc autorisé)
    try {
      await introMusic.play();
    } catch (err) {
      console.warn('introMusic.play() rejeté:', err);
    }

    // On cache le bouton d'activation si présent
    if (unmuteBtn) unmuteBtn.style.display = 'none';

    // On supprime les écouteurs globaux
    document.removeEventListener('click', docClickHandler);
    document.removeEventListener('touchstart', docClickHandler);
  }

  // Handler global (un seul appel nécessaire)
  function docClickHandler(e) {
    activateSoundAndResume();
  }

  // Attache l'écoute sur le bouton (si cliqué explicitement)
  if (unmuteBtn) {
    unmuteBtn.addEventListener('click', (e) => {
      e.stopPropagation(); // évite double-trigger sur document
      activateSoundAndResume();
    }, { once: true });
  }

  // Attache l'écoute globale pour tout autre clic/touch (une seule fois)
  document.addEventListener('click', docClickHandler, { once: true });
  document.addEventListener('touchstart', docClickHandler, { once: true });

  // Quand la vidéo se termine, on enlève l'intro proprement
  video.addEventListener('ended', () => {
    if (!intro) return;
    intro.style.transition = 'opacity 0.8s ease';
    intro.style.opacity = '0';
    setTimeout(() => { intro.style.display = 'none'; }, 900);
  });

  // Logs d'erreur pour debug rapide
  video.addEventListener('error', () => console.error('Video error', video.error));
  video.addEventListener('stalled', () => console.warn('video stalled'));
  video.addEventListener('suspend', () => console.warn('video suspend'));
  video.addEventListener('canplay', () => console.log('video canplay'));
  video.addEventListener('playing', () => console.log('video playing'));

  // Fallback : bouton "Passer l'intro" si la vidéo ne démarre pas correctement
  let skipBtn = document.getElementById('skip-intro');
  if (!skipBtn) {
    skipBtn = document.createElement('button');
    skipBtn.id = 'skip-intro';
    skipBtn.textContent = "Passer l'intro";
    skipBtn.style.position = 'fixed';
    skipBtn.style.right = '20px';
    skipBtn.style.top = '20px';
    skipBtn.style.zIndex = 9999;
    skipBtn.style.display = 'none';
    document.body.appendChild(skipBtn);
  }
  skipBtn.addEventListener('click', () => {
    if (intro) {
      intro.style.transition = 'opacity 0.4s ease';
      intro.style.opacity = '0';
      setTimeout(() => { intro.style.display = 'none'; }, 450);
    }
    try { video.pause(); } catch(e){}
  });

  // Si la vidéo est toujours bloquée au bout de 3s, on montre le skip
  setTimeout(() => {
    if (!video || video.readyState < 2 || video.paused) {
      skipBtn.style.display = 'block';
    }
  }, 3000);
});
</script>

 
  
</body>
</html>
